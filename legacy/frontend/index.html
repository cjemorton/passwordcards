<!DOCTYPE html>
<html lang="en">
{include="includes/header"}
<body>

  <!-- Primary Page Layout
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <div class="container">
    <div class="header">
        <h1>Password Card Generator</h1>
        <p>
          This website allows you to generate customized password cards.
      </p>
        <img src="resources/cards.png" width="100%" alt="Password Card Examples">
    </div>

    <div class="configure">
      <h1>Generate a new card</h1>
      
      <!-- About Link -->
      <div style="text-align: right; margin-bottom: 1em;">
        <button id="about-modal-toggle" style="background: transparent; border: none; color: var(--accent-color); cursor: pointer; text-decoration: underline;">About / Help</button>
      </div>

      <!-- About Modal -->
      <div id="about-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h2>About Password Card Generator</h2>
          
          <div class="info-box">
            <h3>üîí Deterministic Card Generation</h3>
            <p>This generator creates <strong>reproducible password cards</strong>. When you provide a seed value, the same card can be regenerated at any time with identical parameters.</p>
            <ul>
              <li><strong>With Seed:</strong> Generate the same card every time (save your seed!)</li>
              <li><strong>Without Seed:</strong> Generate a unique, random card</li>
              <li><strong>String Seeds:</strong> You can use words or phrases as seeds - they are hashed into numbers using your chosen algorithm</li>
              <li><strong>Lost Card?</strong> Use your seed, hash algorithm, and settings to regenerate it</li>
            </ul>
            <p style="margin-top: 0.5em;"><em>üí° Tip: Save your seed, hash algorithm, and all settings from the PDF documentation page for card recovery. The hash algorithm is CRITICAL for string seeds!</em></p>
          </div>

          <div class="info-box">
            <h3>üîê Algorithm Transparency & Audit</h3>
            <p>This tool is fully open-source. You can review the algorithms and code:</p>
            <ul>
              <li><strong>Card Generation Algorithm:</strong> <a href="https://github.com/cjemorton/passwordcards/blob/master/src/CardCreator.php" target="_blank" rel="noopener">CardCreator.php</a></li>
              <li><strong>Configuration Logic:</strong> <a href="https://github.com/cjemorton/passwordcards/blob/master/src/Configuration.php" target="_blank" rel="noopener">Configuration.php</a></li>
              <li><strong>Seed Hashing:</strong> Uses PHP built-in hash() function with selected algorithm</li>
              <li><strong>Random Generation:</strong> Uses mt_rand() seeded with your seed value for deterministic results</li>
              <li><strong>Privacy:</strong> All generation happens on the server; no seeds are stored</li>
            </ul>
            <p><em>Note: Inspect the code to verify the security and correctness of the implementation.</em></p>
          </div>

          <div class="info-box">
            <h3>üîê Privacy & Local Storage</h3>
            <p><strong>Your privacy matters:</strong></p>
            <ul>
              <li>Theme and font preferences are stored locally in your browser</li>
              <li>Seeds and card data are NEVER stored - they're only used during generation</li>
              <li>All card generation happens server-side; no data is logged or saved</li>
              <li>Use the "Clear Storage" button below to wipe all locally stored settings</li>
            </ul>
          </div>

          <div class="info-box">
            <h3>üìú Credits & History</h3>
            <p>This project is inspired by the original <a href="https://github.com/raphiz/passwordcards" target="_blank">passwordcards</a> project and <a href="https://www.qwertycards.com" target="_blank">Qwertycards.com</a>.</p>
            <p>This fork has diverged significantly with modernized features, enhanced UI, and new capabilities. It is maintained as an independent project with its own development direction.</p>
          </div>
        </div>
      </div>

      <!-- Settings Toolbar -->
      <div class="settings-toolbar" role="toolbar" aria-label="Settings management">
        <button id="export-settings-btn" aria-label="Export settings to file" title="Export your current settings to a file">üì• Export Settings</button>
        <button id="import-settings-btn" aria-label="Import settings from file" title="Import settings from a previously saved file">üì§ Import Settings</button>
        <input type="file" id="import-settings-file" accept=".json" aria-hidden="true">
        <button id="clear-storage-btn" aria-label="Clear local storage" title="Clear all locally stored preferences">üóëÔ∏è Clear Storage</button>
      </div>

      <!-- Password Example -->
      <div class="password-example-box" role="region" aria-label="Sample password preview">
        <h4>üîë Sample Password Preview</h4>
        <div id="password-example" aria-live="polite">Select character types below</div>
        <button type="button" id="generate-example-btn" style="margin-top: 0.5em; padding: 5px 15px;">Regenerate</button>
      </div>

      <p>Pick the characters you want to use</p>
      <form action="" method="POST"  accept-charset="ISO-8859-15">
        <div class="row button-group" role="group" aria-label="Character type selection">
          <input type="checkbox" name="with-numbers" id="with-numbers" class="hidden" autocomplete="off" checked aria-describedby="numbers-desc">
          <label for="with-numbers" class="label-with-numbers button tooltip" title="0123456789">numbers</label>
          <span id="numbers-desc" class="sr-only">Include numbers 0-9</span>

          <input type="checkbox" name="with-lower" id="with-lower" class="hidden" autocomplete="off" checked aria-describedby="lower-desc">
          <label for="with-lower" class="label-with-lower button tooltip" title="abcdefghijklmnopqrstuvwxyz">lower case</label>
          <span id="lower-desc" class="sr-only">Include lowercase letters a-z</span>

          <input type="checkbox" name="with-upper" id="with-upper" class="hidden" autocomplete="off" checked aria-describedby="upper-desc">
          <label for="with-upper" class="label-with-upper button tooltip" title="ABCDEFGHIJKLMNOPQRSTUVWXYZ">upper case</label>
          <span id="upper-desc" class="sr-only">Include uppercase letters A-Z</span>

          <input type="checkbox" name="with-symbols" id="with-symbols" class="hidden" autocomplete="off" checked aria-describedby="symbols-desc">
          <label for="with-symbols" class="label-with-symbols button tooltip" title="!&quot;#$%&amp;\&apos;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~">symbols</label>
          <span id="symbols-desc" class="sr-only">Include special symbols</span>

          <input type="checkbox" name="with-space" id="with-space" class="hidden" autocomplete="off" aria-describedby="space-desc">
          <label for="with-space" class="label-with-space button">space</label>
          <span id="space-desc" class="sr-only">Include space character</span>

          <input type="checkbox" name="with-other" id="with-other" class="hidden" autocomplete="off" aria-describedby="other-desc">
          <label for="with-other" class="label-with-other button tooltip" title="anything else?">other</label>
          <span id="other-desc" class="sr-only">Include custom characters</span>

        </div>
        <div class="row" style="display: none; ">
             <input type="text" id="other-chars" name="other-chars" placeholder="Place other symbols in here" maxlength="20" autocomplete="off" aria-label="Custom characters"/>
        </div>

        <div class="form-section">
             <p>Keyboard layout <span class="tooltip" title="Select your keyboard layout to match the physical keys">‚ìò</span></p>
             <select type="text" name="keyboardlayout" aria-label="Keyboard layout">
              <option value="qwerty">QWERTY</option>
              <option value="qwertz">QWERTZ</option>
             </select>
        </div>

        <div class="form-section">
             <p>Card annotation <span class="tooltip" title="Optional text to display on the back of your card">‚ìò</span></p>
             <input type="text" name="msg" placeholder="For Work" maxlength="20" autocomplete="off" list="annotation-suggestions" aria-label="Card annotation text">
             <datalist id="annotation-suggestions">
               <option value="Email">
               <option value="Banking">
               <option value="Work">
               <option value="Personal">
               <option value="Social Media">
               <option value="Shopping">
               <option value="Gaming">
             </datalist>
        </div>

        <div class="form-section">
             <p>Watermark URL <span class="tooltip" title="URL displayed on card and embedded in QR code">‚ìò</span></p>
             <input type="text" name="watermark-url" placeholder="https://passwordcards.mrnet.work/" value="https://passwordcards.mrnet.work/" maxlength="200" autocomplete="off" style="width: 80%; max-width: 500px;" aria-label="Watermark URL">
        </div>

        <div class="form-section">
            <p>What colors shall we use?</p>
            <label for="primaryColor">Primary</label>
            <div id="primary" class="colorPicker">
                <a class="color"><div class="colorInner"></div></a>
                <div class="track"></div>
                <ul class="dropdown"><li></li></ul>
                <input type="hidden" class="colorInput" value='#1ABC9C' name='primaryColor' id='primaryColor' autocomplete="off"/>
            </div>
            <label for="secondaryColor">Secondary</label>
            <div id="secondary" class="colorPicker">
                <a class="color"><div class="colorInner"></div></a>
                <div class="track"></div>
                <ul class="dropdown"><li></li></ul>
                <input type="hidden" class="colorInput" value='#ffff' name='secondaryColor' id='secondaryColor' autocomplete="off"/>
            </div>

        </div>
        <div class="form-section">
            <p>Seed <span class="tooltip" title="Optional seed for reproducible cards. Use a number or word/phrase. Leave empty for a random card.">‚ìò</span></p>
            <input type="text" id="seed" name="seed" placeholder="Enter seed (optional)" maxlength="50" autocomplete="off" style="width: 80%; max-width: 400px; margin-bottom: 0.5em;" aria-label="Seed value">
            <p style="font-size: 0.9em; margin-top: 0.5em; margin-bottom: 0.5em;">Hash Algorithm <span class="tooltip" title="Algorithm to convert string seeds to numbers. Save this with your seed for card recovery!">‚ìò</span></p>
            <select name="hash-algorithm" id="hash-algorithm" style="width: 80%; max-width: 400px; margin-bottom: 1em;" aria-label="Hash algorithm">
                <option value="sha256" selected>SHA-256 (Recommended)</option>
                <option value="md5">MD5</option>
                <option value="sha1">SHA-1</option>
                <option value="sha512">SHA-512</option>
            </select>
            <p style="font-size: 0.9em; margin-top: 0.5em; margin-bottom: 0.5em;">Print seed on card <span class="tooltip" title="Choose whether to print the seed value on the physical card">‚ìò</span>:</p>
            <div style="margin-bottom: 1em;">
                <label style="display: inline-block; margin-right: 1em;">
                    <input type="checkbox" name="print-string-seed" id="print-string-seed" value="1" autocomplete="off">
                    String seed
                </label>
                <label style="display: inline-block; margin-right: 1em;">
                    <input type="checkbox" name="print-number-seed" id="print-number-seed" value="1" autocomplete="off">
                    Number seed
                </label>
            </div>
        </div>
        
        <div class="form-section">
            <p>QR Code <span class="tooltip" title="Include a QR code linking to the watermark URL">‚ìò</span></p>
            <label style="display: inline-block; margin-right: 1em;">
                <input type="checkbox" name="qr-code-enabled" id="qr-code-enabled" value="1" autocomplete="off" checked>
                Include QR code on card
            </label>
        </div>
        
        <div class="form-section">
            <p>Spacebar size <span class="tooltip" title="Number of characters in the spacebar row (1-8)">‚ìò</span></p>
            <input type="number" min="1" max="8" style="width: 15em;" name="space-length" id="space-size" placeholder="Default: 8" maxlength="10" autocomplete="off" aria-label="Spacebar size">
        </div>
        
        <!-- Batch Generation -->
        <div class="form-section">
            <p>Batch Generation <span class="tooltip" title="Generate multiple cards at once in a ZIP file">‚ìò</span></p>
            <label style="display: inline-block;">
                <input type="checkbox" id="batch-generate-toggle" autocomplete="off">
                Enable batch generation
            </label>
            <div id="batch-options" class="batch-options">
                <p style="font-size: 0.9em;">Generate multiple cards at once:</p>
                <div id="batch-card-list" class="batch-card-list"></div>
                <button type="button" id="add-batch-card" style="padding: 8px 16px; margin-top: 0.5em;">+ Add Card</button>
            </div>
        </div>
        
        <input type="hidden" value='{{sessiontoken}}'/>

        <div class="row" style="margin-top: 30px; text-align: center;">
             <input type="submit" value="Generate PDF!" aria-label="Generate password card PDF"/><br>
        </div>
      </form>
      
      <!-- Theme Selector at Bottom -->
      <div class="theme-selector-bottom">
        <label for="theme-selector">Theme:</label>
        <select id="theme-selector" aria-label="Select color theme">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="custom">Custom</option>
        </select>
        
        <label for="font-selector" style="margin-left: 1em;">Font:</label>
        <select id="font-selector" aria-label="Select font family">
          <option value="sans-serif">Sans Serif</option>
          <option value="monospace">Monospace</option>
          <option value="system">System</option>
        </select>
      </div>
      
      <div class="footer-links">
        <p><a href="https://github.com/cjemorton/passwordcards" target="_blank">Github</a></p>
      </div>
    </div>
 </div>


<script type="text/javascript" src="resources/js/jquery-2.1.3.js"></script>
<script type="text/javascript" src="resources/js/jquery.tinycolorpicker.js"></script>
<script type="text/javascript" src="resources/js/index.js"></script>

<!-- End Document
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
</body>
</html>
