services:
  web:
    build:
      context: .
      dockerfile: apache/Dockerfile
    container_name: passwordcards_web
    ports:
      - "8080:80"
    environment:
      # Set to 'dev' for local development (no HTTPS, no path restrictions)
      # Set to 'prod' for production deployment (force HTTPS, restrict paths)
      - HTACCESS_MODE=${HTACCESS_MODE:-dev}
      # Bypass password for rate limiting
      - BYPASS_PASSWORD=${BYPASS_PASSWORD:-letmein}
      # Card generation limit (number of cards before timeout)
      - CARD_GENERATION_LIMIT=${CARD_GENERATION_LIMIT:-5}
      # Card generation timeout in seconds
      - CARD_GENERATION_TIMEOUT=${CARD_GENERATION_TIMEOUT:-300}
    restart: unless-stopped
